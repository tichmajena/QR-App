import{S as ie,i as ue,s as re,e as p,k as y,c as m,a as O,m as U,d as g,b as a,Z as te,g as X,H as u,_ as Y,$ as ae,a0 as de,a1 as ce,a2 as _e,a3 as fe,a4 as le,U as he,t as ve,Y as pe,h as me,a5 as be,p as ke,q as ge,o as Te,a6 as Ee,a7 as ne,n as qe,a8 as ye,O as Ue}from"../../chunks/vendor-0da5386f.js";import{i as Ne}from"../../chunks/navigation-8ba9dc29.js";import"../../chunks/singletons-d1fb5791.js";function Z(r,{pending:t,error:e,result:o}={}){let v;async function T(c){const d=v={};c.preventDefault();const h=new FormData(r);t&&t({data:h,form:r});try{const l=await fetch(r.action,{method:r.method,headers:{accept:"application/json"},body:h});if(d!==v)return;if(l.ok){o&&o({data:h,form:r,response:l});const b=new URL(r.action);b.search=b.hash="",Ne(b.href)}else e?e({data:h,form:r,error:null,response:l}):console.error(await l.text())}catch(l){if(e)e({data:h,form:r,error:l,response:null});else throw l}}return r.addEventListener("submit",T),{destroy(){r.removeEventListener("submit",T)}}}function oe(r,t,e){const o=r.slice();return o[3]=t[e],o[4]=t,o[5]=e,o}function se(r,t){let e,o,v,T,c,d,h,l,b,P,w,B,f,E,s,i,n,M,C,N,z,I,D,A,G,R,S,V,J,F,K,Q=Ue,q,W,$;function x(...k){return t[1](t[3],t[4],t[5],...k)}function ee(){return t[2](t[3],t[4],t[5])}return{key:r,first:null,c(){e=p("div"),o=p("form"),v=p("input"),c=y(),d=p("input"),l=y(),b=p("button"),B=y(),f=p("form"),E=p("input"),i=y(),n=p("input"),C=y(),N=p("button"),z=y(),I=p("form"),D=p("input"),G=y(),R=p("button"),J=y(),this.h()},l(k){e=m(k,"DIV",{class:!0});var _=O(e);o=m(_,"FORM",{action:!0,method:!0});var H=O(o);v=m(H,"INPUT",{type:!0,name:!0,class:!0}),c=U(H),d=m(H,"INPUT",{type:!0,name:!0,class:!0}),l=U(H),b=m(H,"BUTTON",{class:!0,"aria-label":!0}),O(b).forEach(g),H.forEach(g),B=U(_),f=m(_,"FORM",{class:!0,action:!0,method:!0});var L=O(f);E=m(L,"INPUT",{type:!0,name:!0,class:!0}),i=U(L),n=m(L,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),C=U(L),N=m(L,"BUTTON",{class:!0,"aria-label":!0}),O(N).forEach(g),L.forEach(g),z=U(_),I=m(_,"FORM",{action:!0,method:!0});var j=O(I);D=m(j,"INPUT",{type:!0,name:!0,class:!0}),G=U(j),R=m(j,"BUTTON",{class:!0,"aria-label":!0}),O(R).forEach(g),j.forEach(g),J=U(_),_.forEach(g),this.h()},h(){a(v,"type","hidden"),a(v,"name","uid"),v.value=T=t[3].uid,a(v,"class","svelte-q3kvo1"),a(d,"type","hidden"),a(d,"name","done"),d.value=h=t[3].done?"":"true",a(d,"class","svelte-q3kvo1"),a(b,"class","toggle svelte-q3kvo1"),a(b,"aria-label",P="Mark todo as "+(t[3].done?"not done":"done")),a(o,"action","/todos?_method=PATCH"),a(o,"method","post"),a(E,"type","hidden"),a(E,"name","uid"),E.value=s=t[3].uid,a(E,"class","svelte-q3kvo1"),a(n,"aria-label","Edit todo"),a(n,"type","text"),a(n,"name","text"),n.value=M=t[3].text,a(n,"class","svelte-q3kvo1"),a(N,"class","save svelte-q3kvo1"),a(N,"aria-label","Save todo"),a(f,"class","text svelte-q3kvo1"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(D,"type","hidden"),a(D,"name","uid"),D.value=A=t[3].uid,a(D,"class","svelte-q3kvo1"),a(R,"class","delete svelte-q3kvo1"),a(R,"aria-label","Delete todo"),R.disabled=S=t[3].pending_delete,a(I,"action","/todos?_method=DELETE"),a(I,"method","post"),a(e,"class","todo svelte-q3kvo1"),te(e,"done",t[3].done),this.first=e},m(k,_){X(k,e,_),u(e,o),u(o,v),u(o,c),u(o,d),u(o,l),u(o,b),u(e,B),u(e,f),u(f,E),u(f,i),u(f,n),u(f,C),u(f,N),u(e,z),u(e,I),u(I,D),u(I,G),u(I,R),u(e,J),q=!0,W||($=[Y(w=Z.call(null,o,{pending:x})),Y(Z.call(null,f)),Y(V=Z.call(null,I,{pending:ee}))],W=!0)},p(k,_){t=k,(!q||_&1&&T!==(T=t[3].uid))&&(v.value=T),(!q||_&1&&h!==(h=t[3].done?"":"true"))&&(d.value=h),(!q||_&1&&P!==(P="Mark todo as "+(t[3].done?"not done":"done")))&&a(b,"aria-label",P),w&&ae(w.update)&&_&1&&w.update.call(null,{pending:x}),(!q||_&1&&s!==(s=t[3].uid))&&(E.value=s),(!q||_&1&&M!==(M=t[3].text)&&n.value!==M)&&(n.value=M),(!q||_&1&&A!==(A=t[3].uid))&&(D.value=A),(!q||_&1&&S!==(S=t[3].pending_delete))&&(R.disabled=S),V&&ae(V.update)&&_&1&&V.update.call(null,{pending:ee}),_&1&&te(e,"done",t[3].done)},r(){K=e.getBoundingClientRect()},f(){de(e),Q(),ce(e,K)},a(){Q(),Q=_e(e,K,Ee,{duration:200})},i(k){q||(k&&fe(()=>{F||(F=le(e,ne,{start:.7},!0)),F.run(1)}),q=!0)},o(k){k&&(F||(F=le(e,ne,{start:.7},!1)),F.run(0)),q=!1},d(k){k&&g(e),k&&F&&F.end(),W=!1,he($)}}}function Ie(r){let t,e,o,v,T,c,d,h,l=[],b=new Map,P,w,B,f=r[0];const E=s=>s[3].uid;for(let s=0;s<f.length;s+=1){let i=oe(r,f,s),n=E(i);b.set(n,l[s]=se(n,i))}return{c(){t=y(),e=p("div"),o=p("h1"),v=ve("Todos"),T=y(),c=p("form"),d=p("input"),h=y();for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){pe('[data-svelte="svelte-181o7gf"]',document.head).forEach(g),t=U(s),e=m(s,"DIV",{class:!0});var n=O(e);o=m(n,"H1",{});var M=O(o);v=me(M,"Todos"),M.forEach(g),T=U(n),c=m(n,"FORM",{class:!0,action:!0,method:!0});var C=O(c);d=m(C,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),C.forEach(g),h=U(n);for(let N=0;N<l.length;N+=1)l[N].l(n);n.forEach(g),this.h()},h(){document.title="Todos",a(d,"name","text"),a(d,"aria-label","Add todo"),a(d,"placeholder","+ tap to add a todo"),a(d,"class","svelte-q3kvo1"),a(c,"class","new svelte-q3kvo1"),a(c,"action","/todos"),a(c,"method","post"),a(e,"class","todos svelte-q3kvo1")},m(s,i){X(s,t,i),X(s,e,i),u(e,o),u(o,v),u(e,T),u(e,c),u(c,d),u(e,h);for(let n=0;n<l.length;n+=1)l[n].m(e,null);P=!0,w||(B=Y(Z.call(null,c,{result:Oe})),w=!0)},p(s,[i]){if(i&1){f=s[0],qe();for(let n=0;n<l.length;n+=1)l[n].r();l=be(l,i,E,1,s,f,b,e,ye,se,null,oe);for(let n=0;n<l.length;n+=1)l[n].a();ke()}},i(s){if(!P){for(let i=0;i<f.length;i+=1)ge(l[i]);P=!0}},o(s){for(let i=0;i<l.length;i+=1)Te(l[i]);P=!1},d(s){s&&g(t),s&&g(e);for(let i=0;i<l.length;i+=1)l[i].d();w=!1,B()}}}const Oe=async({form:r})=>{r.reset()};function Pe(r,t,e){let{todos:o}=t;const v=(c,d,h,{data:l})=>{e(0,d[h].done=!!l.get("done"),o)},T=(c,d,h)=>e(0,d[h].pending_delete=!0,o);return r.$$set=c=>{"todos"in c&&e(0,o=c.todos)},[o,v,T]}class Re extends ie{constructor(t){super();ue(this,t,Pe,Ie,re,{todos:0})}}export{Re as default};
